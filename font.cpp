#include "font.h"

const unsigned char font_data[95][8] = {
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, {0x08,0x08,0x08,0x08,0x08,0x00,0x08,0x00},
    {0x14,0x14,0x14,0x00,0x00,0x00,0x00,0x00}, {0x14,0x14,0x3E,0x14,0x3E,0x14,0x14,0x00},
    {0x08,0x1E,0x28,0x1C,0x0A,0x3C,0x08,0x00}, {0x32,0x32,0x04,0x08,0x10,0x26,0x26,0x00},
    {0x10,0x28,0x28,0x10,0x2A,0x24,0x1A,0x00}, {0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00},
    {0x04,0x08,0x10,0x10,0x10,0x08,0x04,0x00}, {0x10,0x08,0x04,0x04,0x04,0x08,0x10,0x00},
    {0x00,0x08,0x2A,0x1C,0x2A,0x08,0x00,0x00}, {0x00,0x08,0x08,0x3E,0x08,0x08,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x10}, {0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x00}, {0x02,0x02,0x04,0x08,0x10,0x20,0x20,0x00},
    {0x1C,0x22,0x26,0x2A,0x32,0x22,0x1C,0x00}, {0x08,0x18,0x08,0x08,0x08,0x08,0x1C,0x00},
    {0x1C,0x22,0x02,0x0C,0x10,0x20,0x3E,0x00}, {0x3E,0x02,0x04,0x0C,0x02,0x22,0x1C,0x00},
    {0x04,0x0C,0x14,0x24,0x3E,0x04,0x04,0x00}, {0x3E,0x20,0x3C,0x02,0x02,0x22,0x1C,0x00},
    {0x0E,0x10,0x20,0x3C,0x22,0x22,0x1C,0x00}, {0x3E,0x02,0x04,0x08,0x10,0x10,0x10,0x00},
    {0x1C,0x22,0x22,0x1C,0x22,0x22,0x1C,0x00}, {0x1C,0x22,0x22,0x1E,0x02,0x04,0x38,0x00},
    {0x00,0x00,0x08,0x00,0x00,0x08,0x00,0x00}, {0x00,0x00,0x08,0x00,0x00,0x08,0x08,0x10},
    {0x04,0x08,0x10,0x20,0x10,0x08,0x04,0x00}, {0x00,0x00,0x3E,0x00,0x3E,0x00,0x00,0x00},
    {0x10,0x08,0x04,0x02,0x04,0x08,0x10,0x00}, {0x1C,0x22,0x02,0x04,0x08,0x00,0x08,0x00},
    {0x1C,0x22,0x2E,0x2A,0x2E,0x20,0x1E,0x00}, {0x08,0x14,0x22,0x22,0x3E,0x22,0x22,0x00},
    {0x3C,0x22,0x22,0x3C,0x22,0x22,0x3C,0x00}, {0x1C,0x22,0x20,0x20,0x20,0x22,0x1C,0x00},
    {0x3C,0x22,0x22,0x22,0x22,0x22,0x3C,0x00}, {0x3E,0x20,0x20,0x3C,0x20,0x20,0x3E,0x00},
    {0x3E,0x20,0x20,0x3C,0x20,0x20,0x20,0x00}, {0x1C,0x22,0x20,0x2E,0x22,0x22,0x1E,0x00},
    {0x22,0x22,0x22,0x3E,0x22,0x22,0x22,0x00}, {0x1C,0x08,0x08,0x08,0x08,0x08,0x1C,0x00},
    {0x0E,0x04,0x04,0x04,0x04,0x24,0x18,0x00}, {0x22,0x24,0x28,0x30,0x28,0x24,0x22,0x00},
    {0x20,0x20,0x20,0x20,0x20,0x20,0x3E,0x00}, {0x22,0x36,0x2A,0x2A,0x22,0x22,0x22,0x00},
    {0x22,0x32,0x2A,0x26,0x22,0x22,0x22,0x00}, {0x1C,0x22,0x22,0x22,0x22,0x22,0x1C,0x00},
    {0x3C,0x22,0x22,0x3C,0x20,0x20,0x20,0x00}, {0x1C,0x22,0x22,0x22,0x2A,0x24,0x1A,0x00},
    {0x3C,0x22,0x22,0x3C,0x28,0x24,0x22,0x00}, {0x1C,0x22,0x20,0x1C,0x02,0x22,0x1C,0x00},
    {0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x00}, {0x22,0x22,0x22,0x22,0x22,0x22,0x1C,0x00},
    {0x22,0x22,0x22,0x22,0x22,0x14,0x08,0x00}, {0x22,0x22,0x22,0x2A,0x2A,0x36,0x22,0x00},
    {0x22,0x22,0x14,0x08,0x14,0x22,0x22,0x00}, {0x22,0x22,0x14,0x08,0x08,0x08,0x08,0x00},
    {0x3E,0x02,0x04,0x08,0x10,0x20,0x3E,0x00}, {0x1C,0x10,0x10,0x10,0x10,0x10,0x1C,0x00},
    {0x20,0x20,0x10,0x08,0x04,0x02,0x02,0x00}, {0x1C,0x04,0x04,0x04,0x04,0x04,0x1C,0x00},
    {0x08,0x14,0x22,0x00,0x00,0x00,0x00,0x00}, {0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00},
    {0x10,0x08,0x04,0x00,0x00,0x00,0x00,0x00}, {0x00,0x00,0x1C,0x02,0x1E,0x22,0x1E,0x00},
    {0x20,0x20,0x3C,0x22,0x22,0x22,0x3C,0x00}, {0x00,0x00,0x1C,0x22,0x20,0x22,0x1C,0x00},
    {0x02,0x02,0x1E,0x22,0x22,0x22,0x1E,0x00}, {0x00,0x00,0x1C,0x22,0x3E,0x20,0x1C,0x00},
    {0x0C,0x12,0x10,0x38,0x10,0x10,0x10,0x00}, {0x00,0x00,0x1E,0x22,0x22,0x1E,0x02,0x1C},
    {0x20,0x20,0x3C,0x22,0x22,0x22,0x22,0x00}, {0x08,0x00,0x18,0x08,0x08,0x08,0x1C,0x00},
    {0x04,0x00,0x0C,0x04,0x04,0x04,0x24,0x18}, {0x20,0x20,0x24,0x28,0x30,0x28,0x24,0x00},
    {0x18,0x08,0x08,0x08,0x08,0x08,0x1C,0x00}, {0x00,0x00,0x36,0x2A,0x2A,0x2A,0x22,0x00},
    {0x00,0x00,0x3C,0x22,0x22,0x22,0x22,0x00}, {0x00,0x00,0x1C,0x22,0x22,0x22,0x1C,0x00},
    {0x00,0x00,0x3C,0x22,0x22,0x3C,0x20,0x20}, {0x00,0x00,0x1E,0x22,0x22,0x1E,0x02,0x02},
    {0x00,0x00,0x2C,0x32,0x20,0x20,0x20,0x00}, {0x00,0x00,0x1E,0x20,0x1C,0x02,0x3C,0x00},
    {0x10,0x10,0x38,0x10,0x10,0x12,0x0C,0x00}, {0x00,0x00,0x22,0x22,0x22,0x22,0x1E,0x00},
    {0x00,0x00,0x22,0x22,0x22,0x14,0x08,0x00}, {0x00,0x00,0x22,0x22,0x2A,0x2A,0x14,0x00},
    {0x00,0x00,0x22,0x14,0x08,0x14,0x22,0x00}, {0x00,0x00,0x22,0x22,0x22,0x1E,0x02,0x1C},
    {0x00,0x00,0x3E,0x04,0x08,0x10,0x3E,0x00}, {0x06,0x08,0x08,0x30,0x08,0x08,0x06,0x00},
    {0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00}, {0x30,0x08,0x08,0x06,0x08,0x08,0x30,0x00},
    {0x00,0x00,0x00,0x32,0x4C,0x00,0x00,0x00},
};

void draw_pixel(int x, int y, Uint16 color) {
    if (x < 0 || x >= 320 || y < 0 || y >= 240) return;
    Uint16* pixels = (Uint16*)screen->pixels;
    pixels[y * (screen->pitch / 2) + x] = color;
}

void draw_char(int x, int y, char c, Uint16 color) {
    if (c < 32 || c > 126) return;
    const unsigned char* glyph = font_data[c - 32];
    for (int row = 0; row < 8; row++) {
        unsigned char line = glyph[row];
        for (int col = 0; col < 6; col++) {
            if (line & (1 << (5 - col))) {
                draw_pixel(x + col, y + row, color);
            }
        }
    }
}

void draw_string(int x, int y, const char* str, Uint16 color) {
    for (int i = 0; str[i]; i++) {
        draw_char(x + i * 6, y, str[i], color);
    }
}

void draw_filled_rect(int x, int y, int w, int h, Uint16 color) {
    SDL_Rect rect = {(Sint16)x, (Sint16)y, (Uint16)w, (Uint16)h};
    SDL_FillRect(screen, &rect, color);
}
